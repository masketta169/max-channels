import{b as r}from"./Bie8Ffmm.js";import{S as v}from"./ChaK3QbV.js";import{s as _}from"./wapPpKCQ.js";import{g as m,r as u,c as d,o as e,a,b as h,q as S,t as l,_ as b,l as f,F as A,j as g,k as j}from"./D_ksBAuK.js";import"./JIQjd6e1.js";const y={getSubmissions:s=>r.get("/admin/submissions",{params:{status:s}}),approveSubmission:(s,i)=>r.patch(`/admin/submissions/${s}/approve`,{adminId:i}),rejectSubmission:(s,i,t)=>r.patch(`/admin/submissions/${s}/reject`,{adminId:i,reason:t})},C={class:"application-card"},k={class:"application-card__header"},E={class:"application-card__header-left"},$={class:"application-card__avatar-container"},I=["src"],B={class:"application-card__title"},D={class:"application-card__description"},N=m({__name:"ApplicationCard",props:{application:{}},emits:["approveSubmission"],setup(s,{emit:i}){const t=i;u({PENDING:"Ожидание",APPROVED:"Одобрено",REJECTED:"Отклонено"});const o=s,p=async()=>{await _.approveSubmission(o.application.id,o.application.adminId),t("approveSubmission")},c=()=>{_.rejectSubmission(o.application.id,o.application.adminId)};return(n,F)=>(e(),d("div",C,[a("div",k,[a("div",E,[a("span",{class:S(["application-card__type",n.application.type])},l(n.application.type),3),h(v,{status:n.application.status},null,8,["status"])])]),a("div",$,[a("img",{src:`https://max-community.ru${n.application.avatarUrl}`,alt:"Application Avatar",class:"application-card__avatar"},null,8,I),a("h3",B,l(n.application.title),1)]),a("p",D,l(n.application.description),1),a("div",{class:"application-card__footer"},[a("button",{class:"application-card__button approve",onClick:p},"ПРИНЯТЬ"),a("button",{class:"application-card__button reject",onClick:c},"ОТКЛОНИТЬ")])]))}}),P=Object.assign(b(N,[["__scopeId","data-v-2ab1d9ae"]]),{__name:"ApplicationCard"}),R={class:"admin-submissions-page"},V={class:"applications-list"},w=m({__name:"submissions",setup(s){const i=u([]),t=async()=>{i.value=await y.getSubmissions().then(o=>o.data)};return f(()=>{t()}),(o,p)=>(e(),d("div",R,[p[0]||(p[0]=a("h1",{class:"admin-submissions-page__title"},"Заявки",-1)),a("div",V,[(e(!0),d(A,null,g(i.value,c=>(e(),j(P,{key:c.id,application:c,onApproveSubmission:t,onRejectApplication:t},null,8,["application"]))),128))])]))}}),L=b(w,[["__scopeId","data-v-f493559b"]]);export{L as default};
