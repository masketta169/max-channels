{"version":3,"file":"submissions-Dkq7Wbqx.js","sources":["../../../../../../../components/FormCreateSubmission.vue","../../../../../../../components/SubmissionCardProfile.vue","../../../../../../../pages/profile/submissions.vue"],"sourcesContent":["<template>\n  <div class=\"form-create-submission-container\">\n    <div class=\"form-create-submission\">\n        <h1 class=\"form-create-submission__title\">Создание заявки</h1>\n\n        <form @submit.prevent=\"handleSubmit\" class=\"form-create-submission__form\">\n        <label>\n            <span>Название</span>\n            <div class=\"form-create-submission__form-input\">\n            <input type=\"text\" v-model=\"form.title\" placeholder=\"Напишите название ресурса\" />\n            </div>\n        </label>\n\n        <label>\n            <span>Описание</span>\n            <div class=\"form-create-submission__form-input\">\n            <input type=\"text\" v-model=\"form.description\" placeholder=\"Напишите описание ресурса\" />\n            </div>\n        </label>\n\n        <label>\n            <span>Тип ресурса</span>\n            <div class=\"form-create-submission__form-radios\">\n              <input  v-model=\"form.type\" type=\"radio\" value=\"CHANNEL\">Канал</input>\n              <input v-model=\"form.type\" type=\"radio\" value=\"CHAT\">Чат</input>\n              <input v-model=\"form.type\" type=\"radio\" value=\"BOT\">Бот</input>\n            </div>\n        </label>\n\n        <label>\n            <span>Ссылка на ресурс</span>\n            <div class=\"form-create-submission__form-input\">\n            <input type=\"text\" v-model=\"form.url\" placeholder=\"Вставьте ссылку на ресурс(https://max.ru/ваш_ресурс)\" />\n            </div>\n        </label>\n\n        <label>\n            <span>Аватар ресурса</span>\n            <div class=\"form-create-submission__form-input\">\n            <input type=\"file\" accept=\"image/*\" @change=\"handleImageChange\" placeholder=\"Прикрепите аватар ресурса\" />\n            </div>\n        </label>\n\n        <label>\n            <span>Уникальное имя канала</span>\n            <div class=\"form-create-submission__form-input\">\n            <input type=\"text\" v-model=\"form.slug\" placeholder=\"Вставьте уникальное имя канала(например: my-channel)\" />\n            </div>\n        </label>\n\n        <label>\n            <span>Категория</span>\n            <div class=\"form-create-submission__form-input\">\n              <div class=\"form-create-submission__form-select\">\n                <div class=\"form-create-submission__form-select-item\" v-for=\"category in categories.data\" :key=\"category.id\">\n                  <input type=\"checkbox\" v-model=\"form.categoryIds\" :value=\"category.id\" />\n                  <span>{{ category.name }}</span>\n                </div>\n              </div>\n            </div>\n        </label>\n\n        <div class=\"form-create-submission__form-buttons\">\n            <button class=\"form-create-submission__form-button-cancel\" @click=\"handleCancelSubmit\">Отмена</button>\n            <button type=\"submit\">Создать</button>\n        </div>\n\n        </form>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { submissionService } from '@/services/api/submissions';\nimport type { CategoryResponse } from '@/services/api/submissions';\nimport { onMounted } from 'vue';\n\nconst emit = defineEmits(['cancelSubmit', 'createSubmission']);\n\nonMounted(async () => {\n  categories.value = await submissionService.getCategories();\n});\n\nconst form = ref({\n  title: '',\n  description: '',\n  type: 'CHANNEL',\n  url: '',\n  avatarUrl: null as File | null,\n  slug: '',\n  categoryIds: [],\n});\n\nconst categories = ref<CategoryResponse[]>([]);\n\nconst handleImageChange = (e: Event) => {\n  const file = (e.target as HTMLInputElement).files?.[0];\n  console.log(file);\n  if (file) {\n    form.value.avatarUrl = file;\n  }\n};\n\nconst handleSubmit = async () => {\n  try {\n    const formData = new FormData();\n    formData.append('title', form.value.title);\n    formData.append('description', form.value.description);\n    formData.append('type', form.value.type);\n    formData.append('url', form.value.url);\n    formData.append('slug', form.value.slug);\n\n\n    formData.append('categoryIds', JSON.stringify(form.value.categoryIds)); // Отправляется не как массив, а как строка. Исправь это \n\n    if (form.value.avatarUrl) {\n      formData.append('avatar', form.value.avatarUrl);\n    }\n\n    console.log(formData);\n    await submissionService.createSubmission(formData).then(() => {\n      emit('createSubmission');\n    }).catch((error) => {\n      console.error('Error creating submission:', error);\n    });\n  } catch (error) {\n    console.error('Error creating submission:', error);\n  }\n};\n\nconst handleCancelSubmit = () => {\n  emit('cancelSubmit');\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@use '@/assets/scss/_variables.scss' as *;\n\n.form-create-submission-container {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  width: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n  backdrop-filter: blur(10px);\n  z-index: 5;\n}\n\n.form-create-submission {\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n    background-color: #F5F8FF;\n    padding: 20px;\n    border-radius: 10px;\n    width: 500px;\n    margin: 0 auto;\n\n    &__title {\n        font-size: 24px;\n        font-weight: 600;\n        text-align: center;\n    }\n\n    &__form {\n        display: flex;\n        flex-direction: column;\n        gap: 20px;\n    }\n\n    &__form-input {\n        border: 1px solid transparent;\n        color: #09090B;\n        background: white;\n        border-radius: $border-radius;\n        color: #09090B;\n        height: 40px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n\n        &::placeholder {\n            color: rgba(#09090B, 0.5);\n        }\n\n        &:focus-within {\n            border: 1px solid $blue-darker;\n            box-shadow: 0 2px 10px rgba($blue-darker, 0.5);\n            transition: $transition;\n        }\n    }\n\n    &__form-input input[type=\"text\"] {\n        flex: 1;\n        background: transparent;\n        border: none;\n        color: #09090B;\n        padding: 0.5rem 1rem;\n        outline: none;\n        font-size: 16px;\n\n        &::placeholder {\n            color: rgba(#09090B, 0.5);\n        }\n    }\n\n    &__form-radios {\n        display: flex;\n        flex-direction: row;\n        gap: 10px;\n        margin-top: 10px;\n    }\n\n    &__form-buttons {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        margin-top: 20px;\n    }\n\n    &__form-buttons button {\n        background-color: #007bff;\n        color: white;\n        border-radius: $border-radius;\n        border: none;\n        width: 40%;\n        height: 40px;\n        cursor: pointer;\n    }\n\n    &__form-button-cancel {\n      background-color: white !important;\n      color: #007bff !important;\n      border: 1px solid #007bff !important;\n    }\n}\n\nlabel {\n  display: flex;\n  flex-direction: column;\n  gap: 5px;\n}\n\n\nbutton {\n  background-color: #007bff;\n  color: white;\n  padding: 10px 20px;\n}\n\nselect {\n  padding: 10px;\n}\n</style>","<template>\n    <div class=\"application-card\">\n        <div class=\"application-card__header\">\n            <div class=\"application-card__header-left\">\n                    <span class=\"application-card__type\" :class=\"submission.type\">\n                    {{ type }}\n                </span>\n\n                <StatusApplication :status=\"submission.status\" />\n            </div>\n        </div>\n        <div class=\"application-card__avatar-container\">\n            <img :src=\"`http://localhost:3001${submission.avatarUrl}`\" alt=\"Application Avatar\" class=\"application-card__avatar\" />\n            <h3 class=\"application-card__title\">\n                {{ submission.title }}\n            </h3>\n        </div>\n        <p class=\"application-card__description\">{{ submission.description }}</p>\n    </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport type { SubmissionResponse } from '@/types/api/submissions';\nimport StatusApplication from '@/components/StatusApplication.vue';\nimport { ref } from 'vue';\nimport { submissionService } from '@/services/api/submissions';\nimport { useRouter } from 'vue-router';\n\nconst router = useRouter();\n\nenum Status {\n    PENDING = 'PENDING',\n    APPROVED = 'APPROVED',\n    REJECTED = 'REJECTED',\n}\n\nenum Type {\n    CHANNEL = 'КАНАЛ',\n    BOT = 'БОТ',\n    CHAT = 'ЧАТ',\n}\n\nconst statuses = ref({\n    PENDING: 'Ожидание',\n    APPROVED: 'Одобрено',\n    REJECTED: 'Отклонено',\n});\n\nconst type = computed(() => {\n    return Type[props.submission.type as keyof typeof Type];\n});\n\nconst props = defineProps<{ \n    submission: SubmissionResponse;\n}>();\n</script>\n\n<style lang=\"scss\" scoped>\n\n.application-card {\n    border: 1px solid #ccc;\n    padding: 10px;\n    background-color: #0B1739;\n    border-radius: 12px;\n    border: 1px solid #343B4F;\n    width: 300px;\n\n    &__header-left {\n        display: flex;\n        flex-direction: row;\n        align-items: flex-start;\n        justify-content: space-between;\n    }\n\n    &__type {\n        font-size: 16px;\n        padding: 10px 0px;\n\n        &.CHANNEL {\n            color: #CB3CFF;\n        }\n\n        &.BOT {\n            color: #00C2FF;\n        }\n\n        &.CHAT {\n            color: #0038FF;\n        }\n    }\n\n    &__title {\n        font-size: 24px;\n        padding: 10px 0px;\n        color: #fff;\n    }\n\n    &__description {\n        font-size: 16px;\n        padding: 10px 0px;\n        color: #fff;\n    }\n\n    &__footer {\n        display: flex;\n        flex-direction: row;\n        align-items: center;\n\n        &.LOAN {\n            color: #FF5A65;\n        }\n        justify-content: space-between;\n        gap: 20px;\n        margin-top: 20px;\n    }\n\n    &__button {\n        width: 100%;\n        height: 40px;\n        border-radius: 12px;\n        font-size: 16px;\n    }\n\n\n\n    &__button.approve {\n        background-color: rgba(#14CA74, 0.2);\n        color: #14CA74;\n        border: 1px solid #14CA74;\n    }\n\n    &__button.reject {\n        background-color: rgba(#FF5A65, 0.2);\n        color: #FF5A65;\n        border: 1px solid #FF5A65;\n    }\n\n    &__avatar-container {\n        display: flex;\n        flex-direction: row;\n        align-items: center;\n        gap: 10px;\n    }\n\n    &__avatar {\n        width: 60px;\n        height: 60px;\n        border-radius: 100%;\n        object-fit: cover;\n    }\n    \n}\n\n</style>","<template>\n  <div class=\"profile__submissions-container\">\n    <div class=\"profile__submissions-header\">\n      <h1>Мои заявки</h1>\n\n      <!-- Табы для Pending, Approved, Rejected -->\n      <div class=\"profile__tabs\">\n        <button class=\"profile__tab\" :class=\"{'active': status === 'PENDING'}\" @click=\"status = 'PENDING'\">В работе</button>\n        <button class=\"profile__tab\" :class=\"{'active': status === 'APPROVED'}\" @click=\"status = 'APPROVED'\">Принятые</button>\n        <button class=\"profile__tab\" :class=\"{'active': status === 'REJECTED'}\" @click=\"status = 'REJECTED'\">Отклоненные</button>\n        <button class=\"profile__button\" @click=\"handleCreateSubmission\">Создать заявку</button>\n      </div>\n    </div>\n\n    <div class=\"profile__submissions\">\n        <SubmissionCardProfile :submission=\"submission\" v-for=\"submission in submissions[status]\" :key=\"submission.id\" />\n    </div>\n    \n  </div>\n\n  <transition name=\"fade\">\n    <FormCreateSubmission v-if=\"isCreateSubmission\" @cancelSubmit=\"handleCancelSubmit\" @createSubmission=\"getSubmissions\" />\n  </transition>\n</template>\n\n<script lang=\"ts\" setup>\nimport { submissionService } from '@/services/api/submissions';\nimport SubmissionCardProfile from '@/components/SubmissionCardProfile.vue';\nimport FormCreateSubmission from '@/components/FormCreateSubmission.vue';\n\n\ndefinePageMeta({\n  layout: 'profile',\n});\n\nconst submissions = ref({\n    PENDING: [],\n    APPROVED: [],\n    REJECTED: [],\n});\n\nconst status = ref('PENDING');\n\nconst isCreateSubmission = ref(false);\n\nconst createSubmission = async () => {\n  const response = await submissionService.createSubmission({\n    title: 'Test',\n    type: 'CHANNEL',\n    description: 'Test',\n  });\n  console.log(response);\n}\n\nconst handleCreateSubmission = () => {\n  isCreateSubmission.value = true;\n}\n\nconst handleCancelSubmit = () => {\n  isCreateSubmission.value = false;\n}\n\n\nconst getSubmissions = async () => {\n  submissions.value.PENDING = await submissionService.getPendingSubmissions().then(res => res.data);\n  submissions.value.APPROVED = await submissionService.getApprovedSubmissions().then(res => res.data);\n  submissions.value.REJECTED = await submissionService.getRejectedSubmissions().then(res => res.data);\n\n  submissions.value.PENDING = submissions.value.PENDING.reverse();\n  submissions.value.APPROVED = submissions.value.APPROVED.reverse();\n  submissions.value.REJECTED = submissions.value.REJECTED.reverse();\n\n  handleCancelSubmit();\n}\n\nonMounted(async () => {\n  submissions.value.PENDING = await submissionService.getPendingSubmissions().then(res => res.data);\n  submissions.value.APPROVED = await submissionService.getApprovedSubmissions().then(res => res.data);\n  submissions.value.REJECTED = await submissionService.getRejectedSubmissions().then(res => res.data);\n\n  submissions.value.PENDING = submissions.value.PENDING.reverse();\n  submissions.value.APPROVED = submissions.value.APPROVED.reverse();\n  submissions.value.REJECTED = submissions.value.REJECTED.reverse();\n});\n</script>\n\n<style lang=\"scss\" scoped>\n\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 0.2s ease;\n}\n\n.fade-enter-from,\n.fade-leave-to {\n  opacity: 0;\n}\n\n.profile {\n\n  &__submissions-header {\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    align-items: start;\n    gap: 20px;\n    position: sticky;\n    top: 0;\n    left: 0;\n    width: 340px;\n    padding: 20px;\n    z-index: 3;\n    background-color: #fff;\n    width: 100%;\n  }\n\n  &__submissions-container {\n    display: flex;\n    flex-direction: column;\n    gap: 20px;\n    overflow-y: auto;\n    max-height: 100%;\n  }\n\n  &__submissions {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    gap: 10px;\n    padding: 0px 20px 20px 20px;\n  }\n\n  &__tabs {\n    display: flex;\n    gap: 10px;\n  }\n\n  &__tab {\n    border: 1px solid #081028;\n    color: #081028;\n    border-radius: 10px;\n    background-color: transparent;\n    padding: 10px 20px;\n    cursor: pointer;\n\n    &:hover {\n      background-color: #007bff;\n      color: white;\n      border: 1px solid #007bff;\n    }\n\n    &.active {\n      border: 1px solid #007bff;\n      color: #007bff;\n\n      &:hover {\n        background-color: #007bff;\n        color: white;\n        border: 1px solid #007bff;\n      }\n    }\n  }\n}\n\n.profile__button {\n    background-color: #007bff;\n    color: white;\n    border-radius: $border-radius;\n    border: none;\n    width: 40%;\n    height: 40px;\n    cursor: pointer;\n    font-size: 16px;\n    width: 140px;\n}\n\n</style>"],"names":["_ssrRenderAttrs","_mergeProps","_ssrRenderAttr","_unref","_ssrIncludeBooleanAttr","_ssrLooseEqual","_ssrLooseContain","_ssrInterpolate","Type","submission","submissions"],"mappings":"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"}