{"version":3,"file":"submissions-D7-HaZba.js","sources":["../../../../../../../services/api/admin.ts","../../../../../../../components/ApplicationCard.vue","../../../../../../../pages/admin/submissions.vue"],"sourcesContent":["import api from './index';\nimport type { Submission } from '@/types/api/admin';\n\nexport const adminService = {\n  getSubmissions: (status?: string) =>\n    api.get<Submission[]>('/admin/submissions', { params: { status } }),\n  approveSubmission: (id: string, adminId: string) =>\n    api.patch(`/admin/submissions/${id}/approve`, { adminId }),\n  rejectSubmission: (id: string, adminId: string, reason: string) =>\n    api.patch(`/admin/submissions/${id}/reject`, { adminId, reason }),\n};\n","<template>\n    <div class=\"application-card\">\n        <div class=\"application-card__header\">\n            <div class=\"application-card__header-left\">\n                <span class=\"application-card__type\" :class=\"application.type\">\n                    {{ application.type }}\n                </span>\n\n                <StatusApplication :status=\"application.status\" />\n            </div>\n        </div>\n        <div class=\"application-card__avatar-container\">\n            <img :src=\"`http://localhost:3001${application.avatarUrl}`\" alt=\"Application Avatar\" class=\"application-card__avatar\" />\n            <h3 class=\"application-card__title\">\n                {{ application.title }}\n            </h3>\n        </div>\n        <p class=\"application-card__description\">{{ application.description }}</p>\n        <div class=\"application-card__footer\">\n            <button class=\"application-card__button approve\" @click=\"approveApplication\">ПРИНЯТЬ</button>\n            <button class=\"application-card__button reject\" @click=\"rejectApplication\">ОТКЛОНИТЬ</button>\n        </div>\n    </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport type { SubmissionResponse } from '@/types/api/submissions';\nimport StatusApplication from '@/components/StatusApplication.vue';\nimport { ref } from 'vue';\nimport { submissionService } from '@/services/api/submissions';\n\nconst emit = defineEmits(['approveSubmission']);\n\nenum Status {\n    PENDING = 'PENDING',\n    APPROVED = 'APPROVED',\n    REJECTED = 'REJECTED',\n}\n\nconst statuses = ref({\n    PENDING: 'Ожидание',\n    APPROVED: 'Одобрено',\n    REJECTED: 'Отклонено',\n});\n\nconst props = defineProps<{ \n    application: SubmissionResponse;\n}>();\n\nconst approveApplication = async () => {\n    await submissionService.approveSubmission(props.application.id, props.application.adminId);\n    emit('approveSubmission');\n}\n\n\nconst rejectApplication = () => {\n    submissionService.rejectSubmission(props.application.id, props.application.adminId);\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.application-card {\n    border: 1px solid #ccc;\n    padding: 10px;\n    margin: 10px;\n    background-color: #0B1739;\n    border-radius: 12px;\n    border: 1px solid #343B4F;\n    width: 300px;\n\n    &__header-left {\n        display: flex;\n        flex-direction: row;\n        align-items: flex-start;\n        justify-content: space-between;\n    }\n\n    &__type {\n        font-size: 16px;\n        padding: 10px 0px;\n\n        &.CHANNEL {\n            color: #CB3CFF;\n        }\n\n        &.BOT {\n            color: #00C2FF;\n        }\n\n        &.CHAT {\n            color: #0038FF;\n        }\n    }\n\n    &__title {\n        font-size: 24px;\n        padding: 10px 0px;\n    }\n\n    &__description {\n        font-size: 16px;\n        padding: 10px 0px;\n    }\n\n    &__footer {\n        display: flex;\n        flex-direction: row;\n        align-items: center;\n\n        &.LOAN {\n            color: #FF5A65;\n        }\n        justify-content: space-between;\n        gap: 20px;\n        margin-top: 20px;\n    }\n\n    &__button {\n        width: 100%;\n        height: 40px;\n        border-radius: 12px;\n        font-size: 16px;\n    }\n\n\n\n    &__button.approve {\n        background-color: rgba(#14CA74, 0.2);\n        color: #14CA74;\n        border: 1px solid #14CA74;\n    }\n\n    &__button.reject {\n        background-color: rgba(#FF5A65, 0.2);\n        color: #FF5A65;\n        border: 1px solid #FF5A65;\n    }\n\n    &__avatar-container {\n        display: flex;\n        flex-direction: row;\n        align-items: center;\n        gap: 10px;\n    }\n\n    &__avatar {\n        width: 60px;\n        height: 60px;\n        border-radius: 100%;\n    }\n}\n\n\n\n</style>","<template>\n    <div class=\"admin-submissions-page\">\n        <h1 class=\"admin-submissions-page__title\">Заявки</h1>\n        <div class=\"applications-list\">\n            <ApplicationCard v-for=\"submission in submissions.reverse()\" :key=\"submission.id\" :application=\"submission\" @approveSubmission=\"fetchSubmissions\" />\n        </div>\n    </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport { ref } from 'vue';\nimport { adminService } from '@/services/api/admin';\nimport { onMounted } from 'vue';\nimport type { SubmissionResponse } from '@/types/api/submissions';\nimport ApplicationCard from '@/components/ApplicationCard.vue';\n\ndefinePageMeta({\n  layout: 'admin',\n  middleware: 'admin'\n});\n\nconst submissions = ref<SubmissionResponse[]>([]);\n\nconst fetchSubmissions = async () => {\n  submissions.value = await adminService.getSubmissions().then(res => res.data);\n  console.log(submissions.value);\n}\n\nonMounted(() => {\n  fetchSubmissions();\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.admin-submissions-page {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  width: 100%;\n  background-color: #081028;\n  color: #fff;\n}\n\n.applications-list {\n  display: flex;\n  flex-direction: row;\n  align-items: start;\n  justify-content: start;\n  flex-wrap: wrap;\n  width: 100%;\n  padding: 20px;\n  box-sizing: border-box;\n  gap: 20px;\n  overflow-y: auto;\n}\n</style>"],"names":["_ssrRenderAttrs","_mergeProps","application","submissions"],"mappings":";;;;;;;;;;;;;;;;;;;;AAGO,MAAM,eAAe;AAAA,EAC1B,gBAAgB,CAAC,WACf,IAAI,IAAkB,sBAAsB,EAAE,QAAQ,EAAE,OAAA,GAAU;AAAA,EACpE,mBAAmB,CAAC,IAAY,YAC9B,IAAI,MAAM,sBAAsB,EAAE,YAAY,EAAE,QAAA,CAAS;AAAA,EAC3D,kBAAkB,CAAC,IAAY,SAAiB,WAC9C,IAAI,MAAM,sBAAsB,EAAE,WAAW,EAAE,SAAS,QAAQ;AACpE;;;;;;;;;AC6BiB,QAAI;AAAA,MACjB,SAAS;AAAA,MACT,UAAU;AAAA,MACV,UAAU;AAAA,IAAA,CACb;;mBA1CQA,eAAAC,WAAA,EAAA,OAAM,sBAAkB,MAAA,CAAA,mJAG4BC,eAAAA,CAAAA,KAAAA,YAAY,MAAI,wBAAA,CAAA,sBACtDA,eAAAA,KAAAA,YAAY,IAAI;;QAGH,QAAQA,KAAAA,YAAY;AAAA,MAAA;6GAItC,OAAG,wBAA0BA,KAAAA,YAAY,SAAS,EAAA,mIAEjDA,eAAAA,KAAAA,YAAY,KAAK,wEAGgBA,eAAAA,KAAAA,YAAY,WAAW;;;;;;;;;;;;;;;ACI3E,UAAMC,eAAc,IAA0B,EAAE;AAEhD,UAAM,mBAAmB,YAAY;AACnC,MAAAA,aAAY,QAAQ,MAAM,aAAa,eAAA,EAAiB,KAAK,CAAA,QAAO,IAAI,IAAI;AAC5E,cAAQ,IAAIA,aAAY,KAAK;AAAA,IAC/B;;AAzBS,YAAA,OAAAH,eAAAC,WAAA,EAAA,OAAM,4BAAwB,MAAA,CAAA,CAAA,+IAAA;oBAGWE,aAAA,MAAY,QAAA,GAAO,CAAjC,eAAU;;UAA4B,KAAK,WAAW;AAAA,UAAK,aAAa;AAAA,UAAa,qBAAmB;AAAA,QAAA;;;;;;;;;;;;;"}