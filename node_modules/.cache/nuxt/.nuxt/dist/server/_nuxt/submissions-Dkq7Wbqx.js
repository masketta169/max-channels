import { defineComponent, ref, mergeProps, unref, useSSRContext, computed } from "vue";
import { ssrRenderAttrs, ssrRenderAttr, ssrIncludeBooleanAttr, ssrLooseEqual, ssrRenderList, ssrInterpolate, ssrLooseContain, ssrRenderClass, ssrRenderComponent } from "vue/server-renderer";
import { s as submissionService } from "./submissions-Booo0X__.js";
import { S as StatusApplication } from "./StatusApplication-BQkfdk5T.js";
import "./index-h3rIohgo.js";
import { useRouter } from "vue-router";
import { _ as _export_sfc } from "../server.mjs";
import "/Users/andrejbelaev/Desktop/Проекты/Max-app/max-channels/node_modules/hookable/dist/index.mjs";
import "axios";
import "./cookie-CI0eADt1.js";
import "/Users/andrejbelaev/Desktop/Проекты/Max-app/max-channels/node_modules/cookie-es/dist/index.mjs";
import "/Users/andrejbelaev/Desktop/Проекты/Max-app/max-channels/node_modules/h3/dist/index.mjs";
import "/Users/andrejbelaev/Desktop/Проекты/Max-app/max-channels/node_modules/destr/dist/index.mjs";
import "/Users/andrejbelaev/Desktop/Проекты/Max-app/max-channels/node_modules/ohash/dist/index.mjs";
import "/Users/andrejbelaev/Desktop/Проекты/Max-app/max-channels/node_modules/klona/dist/index.mjs";
import "/Users/andrejbelaev/Desktop/Проекты/Max-app/max-channels/node_modules/ofetch/dist/node.mjs";
import "#internal/nuxt/paths";
import "/Users/andrejbelaev/Desktop/Проекты/Max-app/max-channels/node_modules/unctx/dist/index.mjs";
import "/Users/andrejbelaev/Desktop/Проекты/Max-app/max-channels/node_modules/radix3/dist/index.mjs";
import "/Users/andrejbelaev/Desktop/Проекты/Max-app/max-channels/node_modules/defu/dist/defu.mjs";
import "/Users/andrejbelaev/Desktop/Проекты/Max-app/max-channels/node_modules/ufo/dist/index.mjs";
const _sfc_main$2 = /* @__PURE__ */ defineComponent({
  __name: "FormCreateSubmission",
  __ssrInlineRender: true,
  emits: ["cancelSubmit", "createSubmission"],
  setup(__props, { emit: __emit }) {
    const form = ref({
      title: "",
      description: "",
      type: "CHANNEL",
      url: "",
      avatarUrl: null,
      slug: "",
      categoryIds: []
    });
    const categories = ref([]);
    return (_ctx, _push, _parent, _attrs) => {
      _push(`<div${ssrRenderAttrs(mergeProps({ class: "form-create-submission-container" }, _attrs))} data-v-973ac655><div class="form-create-submission" data-v-973ac655><h1 class="form-create-submission__title" data-v-973ac655>Создание заявки</h1><form class="form-create-submission__form" data-v-973ac655><label data-v-973ac655><span data-v-973ac655>Название</span><div class="form-create-submission__form-input" data-v-973ac655><input type="text"${ssrRenderAttr("value", unref(form).title)} placeholder="Напишите название ресурса" data-v-973ac655></div></label><label data-v-973ac655><span data-v-973ac655>Описание</span><div class="form-create-submission__form-input" data-v-973ac655><input type="text"${ssrRenderAttr("value", unref(form).description)} placeholder="Напишите описание ресурса" data-v-973ac655></div></label><label data-v-973ac655><span data-v-973ac655>Тип ресурса</span><div class="form-create-submission__form-radios" data-v-973ac655><input${ssrIncludeBooleanAttr(ssrLooseEqual(unref(form).type, "CHANNEL")) ? " checked" : ""} type="radio" value="CHANNEL" data-v-973ac655>Канал <input${ssrIncludeBooleanAttr(ssrLooseEqual(unref(form).type, "CHAT")) ? " checked" : ""} type="radio" value="CHAT" data-v-973ac655>Чат <input${ssrIncludeBooleanAttr(ssrLooseEqual(unref(form).type, "BOT")) ? " checked" : ""} type="radio" value="BOT" data-v-973ac655>Бот </div></label><label data-v-973ac655><span data-v-973ac655>Ссылка на ресурс</span><div class="form-create-submission__form-input" data-v-973ac655><input type="text"${ssrRenderAttr("value", unref(form).url)} placeholder="Вставьте ссылку на ресурс(https://max.ru/ваш_ресурс)" data-v-973ac655></div></label><label data-v-973ac655><span data-v-973ac655>Аватар ресурса</span><div class="form-create-submission__form-input" data-v-973ac655><input type="file" accept="image/*" placeholder="Прикрепите аватар ресурса" data-v-973ac655></div></label><label data-v-973ac655><span data-v-973ac655>Уникальное имя канала</span><div class="form-create-submission__form-input" data-v-973ac655><input type="text"${ssrRenderAttr("value", unref(form).slug)} placeholder="Вставьте уникальное имя канала(например: my-channel)" data-v-973ac655></div></label><label data-v-973ac655><span data-v-973ac655>Категория</span><div class="form-create-submission__form-input" data-v-973ac655><div class="form-create-submission__form-select" data-v-973ac655><!--[-->`);
      ssrRenderList(unref(categories).data, (category) => {
        _push(`<div class="form-create-submission__form-select-item" data-v-973ac655><input type="checkbox"${ssrIncludeBooleanAttr(Array.isArray(unref(form).categoryIds) ? ssrLooseContain(unref(form).categoryIds, category.id) : unref(form).categoryIds) ? " checked" : ""}${ssrRenderAttr("value", category.id)} data-v-973ac655><span data-v-973ac655>${ssrInterpolate(category.name)}</span></div>`);
      });
      _push(`<!--]--></div></div></label><div class="form-create-submission__form-buttons" data-v-973ac655><button class="form-create-submission__form-button-cancel" data-v-973ac655>Отмена</button><button type="submit" data-v-973ac655>Создать</button></div></form></div></div>`);
    };
  }
});
const _sfc_setup$2 = _sfc_main$2.setup;
_sfc_main$2.setup = (props, ctx) => {
  const ssrContext = useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("components/FormCreateSubmission.vue");
  return _sfc_setup$2 ? _sfc_setup$2(props, ctx) : void 0;
};
const FormCreateSubmission = /* @__PURE__ */ Object.assign(_export_sfc(_sfc_main$2, [["__scopeId", "data-v-973ac655"]]), { __name: "FormCreateSubmission" });
var Type = /* @__PURE__ */ ((Type2) => {
  Type2["CHANNEL"] = "КАНАЛ";
  Type2["BOT"] = "БОТ";
  Type2["CHAT"] = "ЧАТ";
  return Type2;
})(Type || {});
const _sfc_main$1 = /* @__PURE__ */ defineComponent({
  __name: "SubmissionCardProfile",
  __ssrInlineRender: true,
  props: {
    submission: {}
  },
  setup(__props) {
    useRouter();
    ref({
      PENDING: "Ожидание",
      APPROVED: "Одобрено",
      REJECTED: "Отклонено"
    });
    const type = computed(() => {
      return Type[props.submission.type];
    });
    const props = __props;
    return (_ctx, _push, _parent, _attrs) => {
      _push(`<div${ssrRenderAttrs(mergeProps({ class: "application-card" }, _attrs))} data-v-63abe085><div class="application-card__header" data-v-63abe085><div class="application-card__header-left" data-v-63abe085><span class="${ssrRenderClass([_ctx.submission.type, "application-card__type"])}" data-v-63abe085>${ssrInterpolate(unref(type))}</span>`);
      _push(ssrRenderComponent(StatusApplication, {
        status: _ctx.submission.status
      }, null, _parent));
      _push(`</div></div><div class="application-card__avatar-container" data-v-63abe085><img${ssrRenderAttr("src", `http://localhost:3001${_ctx.submission.avatarUrl}`)} alt="Application Avatar" class="application-card__avatar" data-v-63abe085><h3 class="application-card__title" data-v-63abe085>${ssrInterpolate(_ctx.submission.title)}</h3></div><p class="application-card__description" data-v-63abe085>${ssrInterpolate(_ctx.submission.description)}</p></div>`);
    };
  }
});
const _sfc_setup$1 = _sfc_main$1.setup;
_sfc_main$1.setup = (props, ctx) => {
  const ssrContext = useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("components/SubmissionCardProfile.vue");
  return _sfc_setup$1 ? _sfc_setup$1(props, ctx) : void 0;
};
const SubmissionCardProfile = /* @__PURE__ */ Object.assign(_export_sfc(_sfc_main$1, [["__scopeId", "data-v-63abe085"]]), { __name: "SubmissionCardProfile" });
const _sfc_main = /* @__PURE__ */ defineComponent({
  __name: "submissions",
  __ssrInlineRender: true,
  setup(__props) {
    const submissions2 = ref({
      PENDING: [],
      APPROVED: [],
      REJECTED: []
    });
    const status = ref("PENDING");
    const isCreateSubmission = ref(false);
    const handleCancelSubmit = () => {
      isCreateSubmission.value = false;
    };
    const getSubmissions = async () => {
      submissions2.value.PENDING = await submissionService.getPendingSubmissions().then((res) => res.data);
      submissions2.value.APPROVED = await submissionService.getApprovedSubmissions().then((res) => res.data);
      submissions2.value.REJECTED = await submissionService.getRejectedSubmissions().then((res) => res.data);
      submissions2.value.PENDING = submissions2.value.PENDING.reverse();
      submissions2.value.APPROVED = submissions2.value.APPROVED.reverse();
      submissions2.value.REJECTED = submissions2.value.REJECTED.reverse();
      handleCancelSubmit();
    };
    return (_ctx, _push, _parent, _attrs) => {
      _push(`<!--[--><div class="profile__submissions-container" data-v-4a612877><div class="profile__submissions-header" data-v-4a612877><h1 data-v-4a612877>Мои заявки</h1><div class="profile__tabs" data-v-4a612877><button class="${ssrRenderClass([{ "active": unref(status) === "PENDING" }, "profile__tab"])}" data-v-4a612877>В работе</button><button class="${ssrRenderClass([{ "active": unref(status) === "APPROVED" }, "profile__tab"])}" data-v-4a612877>Принятые</button><button class="${ssrRenderClass([{ "active": unref(status) === "REJECTED" }, "profile__tab"])}" data-v-4a612877>Отклоненные</button><button class="profile__button" data-v-4a612877>Создать заявку</button></div></div><div class="profile__submissions" data-v-4a612877><!--[-->`);
      ssrRenderList(unref(submissions2)[unref(status)], (submission) => {
        _push(ssrRenderComponent(SubmissionCardProfile, {
          submission,
          key: submission.id
        }, null, _parent));
      });
      _push(`<!--]--></div></div>`);
      if (unref(isCreateSubmission)) {
        _push(ssrRenderComponent(FormCreateSubmission, {
          onCancelSubmit: handleCancelSubmit,
          onCreateSubmission: getSubmissions
        }, null, _parent));
      } else {
        _push(`<!---->`);
      }
      _push(`<!--]-->`);
    };
  }
});
const _sfc_setup = _sfc_main.setup;
_sfc_main.setup = (props, ctx) => {
  const ssrContext = useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("pages/profile/submissions.vue");
  return _sfc_setup ? _sfc_setup(props, ctx) : void 0;
};
const submissions = /* @__PURE__ */ _export_sfc(_sfc_main, [["__scopeId", "data-v-4a612877"]]);
export {
  submissions as default
};
//# sourceMappingURL=submissions-Dkq7Wbqx.js.map
