import{g as N,l as V,r as c,c as v,o as m,a as s,p as O,e as d,v as f,u as a,d as D,C as P,F as g,j as A,D as k,t as E,_ as S,m as h,h as w,b as I,q as C,w as U,T as x,k as R,E as G}from"./Be8IngJE.js";import{s as p}from"./DWpBGXGL.js";import{S as J}from"./DsZ1cteo.js";import"./BJWXqVAu.js";import"./JIQjd6e1.js";const B={class:"form-create-submission-container"},F={class:"form-create-submission"},j={class:"form-create-submission__form-input"},H={class:"form-create-submission__form-input"},M={class:"form-create-submission__form-radios"},L={class:"form-create-submission__form-input"},q={class:"form-create-submission__form-input"},z={class:"form-create-submission__form-input"},K={class:"form-create-submission__form-input"},Q={class:"form-create-submission__form-select"},W=["value"],X=N({__name:"FormCreateSubmission",emits:["cancelSubmit","createSubmission"],setup(u,{emit:i}){const r=i;V(async()=>{_.value=await p.getCategories()});const t=c({title:"",description:"",type:"CHANNEL",url:"",avatarUrl:null,slug:"",categoryIds:[]}),_=c([]),b=o=>{const e=o.target.files?.[0];e&&(t.value.avatarUrl=e)},y=async()=>{try{const o=new FormData;o.append("title",t.value.title),o.append("description",t.value.description),o.append("type",t.value.type),o.append("url",t.value.url),o.append("slug",t.value.slug),o.append("categoryIds",JSON.stringify(t.value.categoryIds)),t.value.avatarUrl&&o.append("avatar",t.value.avatarUrl),console.log(o),await p.createSubmission(o).then(()=>{r("createSubmission")}).catch(e=>{console.error("Error creating submission:",e)})}catch(o){console.error("Error creating submission:",o)}},l=()=>{r("cancelSubmit")};return(o,e)=>(m(),v("div",B,[s("div",F,[e[19]||(e[19]=s("h1",{class:"form-create-submission__title"},"Создание заявки",-1)),s("form",{onSubmit:O(y,["prevent"]),class:"form-create-submission__form"},[s("label",null,[e[8]||(e[8]=s("span",null,"Название",-1)),s("div",j,[d(s("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=n=>a(t).title=n),placeholder:"Напишите название ресурса"},null,512),[[f,a(t).title]])])]),s("label",null,[e[9]||(e[9]=s("span",null,"Описание",-1)),s("div",H,[d(s("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=n=>a(t).description=n),placeholder:"Напишите описание ресурса"},null,512),[[f,a(t).description]])])]),s("label",null,[e[13]||(e[13]=s("span",null,"Тип ресурса",-1)),s("div",M,[d(s("input",{"onUpdate:modelValue":e[2]||(e[2]=n=>a(t).type=n),type:"radio",value:"CHANNEL"},null,512),[[P,a(t).type]]),e[10]||(e[10]=D("Канал ",-1)),d(s("input",{"onUpdate:modelValue":e[3]||(e[3]=n=>a(t).type=n),type:"radio",value:"CHAT"},null,512),[[P,a(t).type]]),e[11]||(e[11]=D("Чат ",-1)),d(s("input",{"onUpdate:modelValue":e[4]||(e[4]=n=>a(t).type=n),type:"radio",value:"BOT"},null,512),[[P,a(t).type]]),e[12]||(e[12]=D("Бот ",-1))])]),s("label",null,[e[14]||(e[14]=s("span",null,"Ссылка на ресурс",-1)),s("div",L,[d(s("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=n=>a(t).url=n),placeholder:"Вставьте ссылку на ресурс(https://max.ru/ваш_ресурс)"},null,512),[[f,a(t).url]])])]),s("label",null,[e[15]||(e[15]=s("span",null,"Аватар ресурса",-1)),s("div",q,[s("input",{type:"file",accept:"image/*",onChange:b,placeholder:"Прикрепите аватар ресурса"},null,32)])]),s("label",null,[e[16]||(e[16]=s("span",null,"Уникальное имя канала",-1)),s("div",z,[d(s("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=n=>a(t).slug=n),placeholder:"Вставьте уникальное имя канала(например: my-channel)"},null,512),[[f,a(t).slug]])])]),s("label",null,[e[17]||(e[17]=s("span",null,"Категория",-1)),s("div",K,[s("div",Q,[(m(!0),v(g,null,A(a(_).data,n=>(m(),v("div",{class:"form-create-submission__form-select-item",key:n.id},[d(s("input",{type:"checkbox","onUpdate:modelValue":e[7]||(e[7]=T=>a(t).categoryIds=T),value:n.id},null,8,W),[[k,a(t).categoryIds]]),s("span",null,E(n.name),1)]))),128))])])]),s("div",{class:"form-create-submission__form-buttons"},[s("button",{class:"form-create-submission__form-button-cancel",onClick:l},"Отмена"),e[18]||(e[18]=s("button",{type:"submit"},"Создать",-1))])],32)])]))}}),Y=Object.assign(S(X,[["__scopeId","data-v-3a6eca5e"]]),{__name:"FormCreateSubmission"}),Z={class:"application-card"},ss={class:"application-card__header"},es={class:"application-card__header-left"},ts={class:"application-card__avatar-container"},as=["src"],is={class:"application-card__title"},os={class:"application-card__description"};var $=(u=>(u.CHANNEL="КАНАЛ",u.BOT="БОТ",u.CHAT="ЧАТ",u))($||{});const ns=N({__name:"SubmissionCardProfile",props:{submission:{}},setup(u){h(),c({PENDING:"Ожидание",APPROVED:"Одобрено",REJECTED:"Отклонено"});const i=w(()=>$[r.submission.type]),r=u;return(t,_)=>(m(),v("div",Z,[s("div",ss,[s("div",es,[s("span",{class:C(["application-card__type",t.submission.type])},E(a(i)),3),I(J,{status:t.submission.status},null,8,["status"])])]),s("div",ts,[s("img",{src:`https://max-community.ru${t.submission.avatarUrl}`,alt:"Application Avatar",class:"application-card__avatar"},null,8,as),s("h3",is,E(t.submission.title),1)]),s("p",os,E(t.submission.description),1)]))}}),ls=Object.assign(S(ns,[["__scopeId","data-v-92238f1f"]]),{__name:"SubmissionCardProfile"}),rs={class:"profile__submissions-container"},us={class:"profile__submissions-header"},ds={class:"profile__tabs"},ps={class:"profile__submissions"},ms=N({__name:"submissions",setup(u){const i=c({PENDING:[],APPROVED:[],REJECTED:[]}),r=c("PENDING"),t=c(!1),_=()=>{t.value=!0},b=()=>{t.value=!1},y=async()=>{i.value.PENDING=await p.getPendingSubmissions().then(l=>l.data),i.value.APPROVED=await p.getApprovedSubmissions().then(l=>l.data),i.value.REJECTED=await p.getRejectedSubmissions().then(l=>l.data),i.value.PENDING=i.value.PENDING.reverse(),i.value.APPROVED=i.value.APPROVED.reverse(),i.value.REJECTED=i.value.REJECTED.reverse(),b()};return V(async()=>{i.value.PENDING=await p.getPendingSubmissions().then(l=>l.data),i.value.APPROVED=await p.getApprovedSubmissions().then(l=>l.data),i.value.REJECTED=await p.getRejectedSubmissions().then(l=>l.data),i.value.PENDING=i.value.PENDING.reverse(),i.value.APPROVED=i.value.APPROVED.reverse(),i.value.REJECTED=i.value.REJECTED.reverse()}),(l,o)=>(m(),v(g,null,[s("div",rs,[s("div",us,[o[3]||(o[3]=s("h1",null,"Мои заявки",-1)),s("div",ds,[s("button",{class:C(["profile__tab",{active:a(r)==="PENDING"}]),onClick:o[0]||(o[0]=e=>r.value="PENDING")},"В работе",2),s("button",{class:C(["profile__tab",{active:a(r)==="APPROVED"}]),onClick:o[1]||(o[1]=e=>r.value="APPROVED")},"Принятые",2),s("button",{class:C(["profile__tab",{active:a(r)==="REJECTED"}]),onClick:o[2]||(o[2]=e=>r.value="REJECTED")},"Отклоненные",2),s("button",{class:"profile__button",onClick:_},"Создать заявку")])]),s("div",ps,[(m(!0),v(g,null,A(a(i)[a(r)],e=>(m(),R(ls,{submission:e,key:e.id},null,8,["submission"]))),128))])]),I(x,{name:"fade"},{default:U(()=>[a(t)?(m(),R(Y,{key:0,onCancelSubmit:b,onCreateSubmission:y})):G("",!0)]),_:1})],64))}}),Es=S(ms,[["__scopeId","data-v-39a056f1"]]);export{Es as default};
