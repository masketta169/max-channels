import{b as r}from"./CJYJ-HhU.js";import{S as b}from"./BT4--mPQ.js";import{s as _}from"./DXlndGe5.js";import{g as m,r as u,c as d,o as e,a,b as h,q as S,t as l,_ as v,l as f,F as g,j as A,k as C}from"./CvK9njM3.js";import"./B0FIwMiM.js";const j={getSubmissions:i=>r.get("/admin/submissions",{params:{status:i}}),approveSubmission:(i,s)=>r.patch(`/admin/submissions/${i}/approve`,{adminId:s}),rejectSubmission:(i,s,o)=>r.patch(`/admin/submissions/${i}/reject`,{adminId:s,reason:o})},k={class:"application-card"},y={class:"application-card__header"},E={class:"application-card__header-left"},$={class:"application-card__avatar-container"},I=["src"],B={class:"application-card__title"},D={class:"application-card__description"},N=m({__name:"ApplicationCard",props:{application:{}},emits:["approveSubmission"],setup(i,{emit:s}){const o=s;u({PENDING:"Ожидание",APPROVED:"Одобрено",REJECTED:"Отклонено"});const t=i,p=async()=>{await _.approveSubmission(t.application.id,t.application.adminId),o("approveSubmission")},c=()=>{_.rejectSubmission(t.application.id,t.application.adminId)};return(n,O)=>(e(),d("div",k,[a("div",y,[a("div",E,[a("span",{class:S(["application-card__type",n.application.type])},l(n.application.type),3),h(b,{status:n.application.status},null,8,["status"])])]),a("div",$,[a("img",{src:`http://localhost:3001${n.application.avatarUrl}`,alt:"Application Avatar",class:"application-card__avatar"},null,8,I),a("h3",B,l(n.application.title),1)]),a("p",D,l(n.application.description),1),a("div",{class:"application-card__footer"},[a("button",{class:"application-card__button approve",onClick:p},"ПРИНЯТЬ"),a("button",{class:"application-card__button reject",onClick:c},"ОТКЛОНИТЬ")])]))}}),P=Object.assign(v(N,[["__scopeId","data-v-ed1d8b23"]]),{__name:"ApplicationCard"}),V={class:"admin-submissions-page"},w={class:"applications-list"},F=m({__name:"submissions",setup(i){const s=u([]),o=async()=>{s.value=await j.getSubmissions().then(t=>t.data),console.log(s.value)};return f(()=>{o()}),(t,p)=>(e(),d("div",V,[p[0]||(p[0]=a("h1",{class:"admin-submissions-page__title"},"Заявки",-1)),a("div",w,[(e(!0),d(g,null,A(s.value.reverse(),c=>(e(),C(P,{key:c.id,application:c,onApproveSubmission:o},null,8,["application"]))),128))])]))}}),L=v(F,[["__scopeId","data-v-98316d74"]]);export{L as default};
